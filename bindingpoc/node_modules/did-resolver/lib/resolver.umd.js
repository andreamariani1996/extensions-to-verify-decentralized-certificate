!function(r,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports):"function"==typeof define&&define.amd?define(["exports"],e):e((r||self).didResolver={})}(this,function(r){function e(r,e){(null==e||e>r.length)&&(e=r.length);for(var t=0,n=new Array(e);t<e;t++)n[t]=r[t];return n}function t(){var r=new Map;return function(e,t){try{var n,o=function(o){if(n)return o;var i=r.get(e.did);return void 0!==i?i:Promise.resolve(t()).then(function(t){return null!==t&&r.set(e.did,t),t})},i=function(){if(e.params&&"true"===e.params["no-cache"])return n=1,Promise.resolve(t())}();return Promise.resolve(i&&i.then?i.then(o):o(i))}catch(r){return Promise.reject(r)}}}function n(r,e){return e()}var o=new RegExp("^did:([a-zA-Z0-9_]+):([a-zA-Z0-9_.-]+(:[a-zA-Z0-9_.-]+)*)((;[a-zA-Z0-9_.:%-]+=[a-zA-Z0-9_.:%-]*)*)(/[^#?]*)?([?][^#]*)?(#.*)?$");function i(r){if(""===r||!r)throw new Error("Missing DID");var t=r.match(o);if(t){var n={did:"did:"+t[1]+":"+t[2],method:t[1],id:t[2],didUrl:r};if(t[4]){var i=t[4].slice(1).split(";");n.params={};for(var a,u=function(r,t){var n;if("undefined"==typeof Symbol||null==r[Symbol.iterator]){if(Array.isArray(r)||(n=function(r,t){if(r){if("string"==typeof r)return e(r,t);var n=Object.prototype.toString.call(r).slice(8,-1);return"Object"===n&&r.constructor&&(n=r.constructor.name),"Map"===n||"Set"===n?Array.from(r):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?e(r,t):void 0}}(r))){n&&(r=n);var o=0;return function(){return o>=r.length?{done:!0}:{done:!1,value:r[o++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}return(n=r[Symbol.iterator]()).next.bind(n)}(i);!(a=u()).done;){var s=a.value.split("=");n.params[s[0]]=s[1]}}return t[6]&&(n.path=t[6]),t[7]&&(n.query=t[7].slice(1)),t[8]&&(n.fragment=t[8].slice(1)),n}throw new Error("Invalid DID "+r)}r.Resolver=function(){function r(r,e){void 0===r&&(r={}),this.registry=r,this.cache=!0===e?t():e||n}return r.prototype.resolve=function(r){try{var e,t=this,n=function(r){if(e)return r;throw new Error("Unsupported DID method: '"+o.method+"'")},o=i(r),a=t.registry[o.method],u=function(){if(a)return Promise.resolve(t.cache(o,function(){return a(o.did,o,t)})).then(function(r){if(null==r)throw new Error("resolver returned null for "+o.did);return e=1,r})}();return Promise.resolve(u&&u.then?u.then(n):n(u))}catch(r){return Promise.reject(r)}},r}(),r.inMemoryCache=t,r.noCache=n,r.parse=i});
//# sourceMappingURL=resolver.umd.js.map
